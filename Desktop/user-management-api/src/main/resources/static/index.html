<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gest칚o de Usu치rios - Digitec</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f4f7f6; }
        .card { border: none; border-radius: 12px; }
        .btn-success { background-color: #28a745; border: none; }
        .table thead { background-color: #343a40; color: white; }
    </style>
</head>
<body class="container mt-5">

    <div class="card shadow p-4">
        <h2 class="text-primary mb-4">Gerenciador de Usu치rios 游</h2>
        
        <div class="row g-2 mb-4">
            <div class="col-md-5">
                <input type="text" id="nome" class="form-control" placeholder="Nome Completo">
            </div>
            <div class="col-md-5">
                <input type="email" id="email" class="form-control" placeholder="E-mail">
            </div>
            <div class="col-md-2">
                <button onclick="salvar()" class="btn btn-success w-100">Cadastrar</button>
            </div>
        </div>
        
        <div class="table-responsive">
            <table class="table table-hover mt-2">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome</th>
                        <th>E-mail</th>
                        <th class="text-center">A칞칫es</th>
                    </tr>
                </thead>
                <tbody id="lista">
                    </tbody>
            </table>
        </div>
    </div>

    <script>
        const API_URL = '/users';

        // Fun칞칚o para carregar usu치rios da API
        async function carregar() {
            try {
                const res = await fetch(API_URL);
                const dados = await res.json();
                const tbody = document.getElementById('lista');
                
                tbody.innerHTML = dados.map(u => `
                    <tr>
                        <td>${u.id}</td>
                        <td>${u.name}</td>
                        <td>${u.email}</td>
                        <td class="text-center">
                            <button onclick="deletar(${u.id})" class="btn btn-danger btn-sm">Excluir</button>
                        </td>
                    </tr>
                `).join('');
            } catch (error) {
                console.error("Erro ao carregar usu치rios:", error);
            }
        }

        // Fun칞칚o para salvar novo usu치rio
        async function salvar() {
            const name = document.getElementById('nome').value;
            const email = document.getElementById('email').value;

            if (!name || !email) {
                alert("Por favor, preencha nome e e-mail.");
                return;
            }

            await fetch(API_URL, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ name, email, password: '123' })
            });

            // Limpa os campos e recarrega a lista
            document.getElementById('nome').value = '';
            document.getElementById('email').value = '';
            carregar();
        }

        // Fun칞칚o para deletar usu치rio
        async function deletar(id) {
            if (confirm("Tem certeza que deseja excluir este usu치rio?")) {
                await fetch(`${API_URL}/${id}`, { method: 'DELETE' });
                carregar();
            }
        }

        // Inicia a listagem ao abrir a p치gina
        carregar();
    </script>
</body>
</html>